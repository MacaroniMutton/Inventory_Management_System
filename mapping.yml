mappings:
  # 1. Capture Custom View Timers (Product CRUD times)
  # Example: inventory_view_get_products_views_ProductViewSet_product_list_time
  - match: "inventory.view.*.*.views.*.*_time"
    name: "django_view_custom_timer_seconds"
    timer_type: histogram
    labels:
      method: "$1"
      endpoint: "$2"
      view_class: "$3"
      custom_metric: "$4"

  # 2. Capture Middleware View Totals (Auto-generated by django-statsd)
  - match: "inventory.view.*.*.views.*.total"
    name: "django_view_duration_seconds"
    timer_type: histogram
    labels:
      method: "$1"
      endpoint: "$2"
      view_class: "$3"

  # 3. Capture Stock Entry Counters
  # Example: inventory_view_post_stock_views_StockEntryViewSet_stock_entries_created
  - match: "inventory.view.*.*.views.*.stock_entries_created"
    name: "django_stock_entries_total"
    labels:
      method: "$1"
      endpoint: "$2"

  # 4. Capture Kafka Producer Status
  # Example: inventory_view_post_stock_views_StockEntryViewSet_kafka_producer_success
  - match: "inventory.view.*.*.views.*.kafka_producer_*"
    name: "django_kafka_producer_events_total"
    labels:
      status: "$4"
      view_class: "$3"

  # 5. Capture HTTP Response Codes
  - match: "inventory.view.http_codes.*"
    name: "django_http_responses_total"
    labels:
      code: "$1"

  # 6. Capture JSON Processing Times (Auto-patch)
  - match: "inventory.view.*.*.views.*.json_*"
    name: "django_json_processing_seconds"
    timer_type: summary
    labels:
      operation: "$4"
      view_class: "$3"